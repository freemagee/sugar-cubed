(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)i=s[d],o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100 mw8 center pa3",attrs:{id:"app"}},[n("food-search",{attrs:{"search-query":e.search.searchQuery,"search-branded":e.search.searchBranded,loading:e.loading},on:{"set-search-data":e.setSearchData}}),n("search-results",{attrs:{"food-list":e.foodList,"selected-id":e.selectedRawData.id},on:{retrieve:e.getDataForSelected}}),n("nutrition-information",{attrs:{name:e.information.name,nutrition:e.information.nutrition}})],1)},a=[],i=(n("28a5"),n("7f7f"),n("53ca")),s=(n("386d"),n("a481"),{apiKey:"xKUWA5YrDZnISy85PN6WUXPcQ1pfWp8QEKYKKZOi",endPoints:{search:"https://api.nal.usda.gov/ndb/search/?",reports:"https://api.nal.usda.gov/ndb/reports/?",nutrients:"https://api.nal.usda.gov/ndb/nutrients/?"},nutrients:{sugar:{id:"269"}}}),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"search"}},[n("div",{staticClass:"flex-l flex-wrap-l items-center-l justify-center-l"},[n("div",{staticClass:"mb1 mb3-m mb0-l mr5-l flex-l flex-auto-l items-center-l"},[n("label",{staticClass:"db segoe-ui light-gray b mb1 mb0-l mr3-l nowrap-l",attrs:{for:"foodSearch"}},[e._v("\n        Search for food\n      ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"dib input-reset input-focus segoe-ui lh-copy pa2 br2 bn w-100 w-75-m",attrs:{id:"foodSearch",type:"text",placeholder:"e.g. Apples"},domProps:{value:e.query},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null},input:function(t){t.target.composing||(e.query=t.target.value)}}})]),n("div",{staticClass:"mb1 mb3-m mb0-l mr5-l"},[n("label",{staticClass:"segoe-ui b light-gray",attrs:{for:"brandedFoods"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isChecked,expression:"isChecked"}],staticClass:"mr2",attrs:{id:"brandedFoods",type:"checkbox"},domProps:{checked:Array.isArray(e.isChecked)?e._i(e.isChecked,null)>-1:e.isChecked},on:{click:function(t){e.setSearchBranded(t.target.checked)},change:function(t){var n=e.isChecked,r=t.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=e._i(n,a);r.checked?i<0&&(e.isChecked=n.concat([a])):i>-1&&(e.isChecked=n.slice(0,i).concat(n.slice(i+1)))}else e.isChecked=o}}}),e._v("\n        Search branded foods?\n      ")])]),n("button",{staticClass:"button-reset segoe-ui pv2 ph3 br2 bn bg-caribbean-green white pointer bg-animate hover-bg-near-black",class:{"is-loading":e.loading},attrs:{type:"button"},on:{click:e.submit}},[e._v("\n      Get Food List\n    ")])])])},u=[],l={name:"FoodSearch",props:{searchQuery:{type:String,required:!0},searchBranded:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},data:function(){return{query:this.searchQuery,isChecked:this.searchBranded}},methods:{setSearchBranded:function(e){this.isChecked=e},submit:function(){this.$emit("set-search-data",[this.query,this.isChecked])}}},d=l,f=n("2877"),h=Object(f["a"])(d,c,u,!1,null,null,null);h.options.__file="FoodSearch.vue";var p=h.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.foodList.length>0?n("section",{attrs:{id:"searchResults"}},[n("div",{staticClass:"flex flex-column"},e._l(e.foodList,function(t,r){return n("button",{key:t.ndbno,staticClass:"button-reset flex-auto tl segoe-ui pv2 ph3 bl bt br b--black-10 pointer bg-animate",class:{"dark-gray bg-white hover-bg-light-gray":t.ndbno!==e.selectedId,"white bg-caribbean-green":t.ndbno===e.selectedId,bb:r===e.foodList.length-1,"bb-0":r!==e.foodList.length-1},attrs:{value:t.name,type:"button"},on:{click:function(n){e.selectFood(t)}}},[e._v("\n      "+e._s(t.name)+"\n    ")])}))]):e._e()},m=[],g={name:"SearchResults",props:{foodList:{type:Array,required:!0},selectedId:{type:String,required:!0}},methods:{selectFood:function(e){this.$emit("retrieve",e)}}},v=g,y=Object(f["a"])(v,b,m,!1,null,null,null);y.options.__file="SearchResults.vue";var w=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return""!==e.name?n("section",{staticClass:"overflow-auto overflow-hidden-ns flex-ns",attrs:{id:"foodInformation"}},[n("div",{staticClass:"mb2 mb0-ns fg0 fs1 fb-50"},[n("h3",{staticClass:"mt0 mb3 segoe-ui normal f3 lh-title light-gray"},[e._v(e._s(e.name))]),0===e.nutrition.totalSugars||"0.00"===e.nutrition.totalSugars?n("p",{staticClass:"ma0 segoe-ui f4 lh-copy light-gray"},[e._v("\n      Sugar free!\n    ")]):n("p",{staticClass:"ma0 segoe-ui f4 lh-copy light-gray"},[n("strong",[e._v("Measure: ")]),e._v("per 100 grams"),n("br"),n("strong",[e._v("Grams of sugar: ")]),e._v(e._s(e.nutrition.totalSugars)),n("br"),n("strong",[e._v("Sugar cubes: ")]),e._v(e._s(e.nutrition.wholeCubes+1*e.nutrition.remainderCube)+"\n    ")])]),n("div",{staticClass:"flex flex-wrap fg0 fs1 fb-50"},[e._l(e.nutrition.wholeCubes,function(t,r){return n("div",{key:r,staticClass:"mb2 bg-near-white ba b--black-30 b--dotted bw2",class:{mr2:r!==e.nutrition.wholeCubes-1},style:{height:e.nutrition.cubeSize+"px",flex:"0 1 "+e.nutrition.cubeSize+"px"}})}),"0.0"!==e.nutrition.remainderCube?n("div",{staticClass:"mb2 bg-near-white ba b--black-30 b--dotted bw2",class:{ml2:0!=e.nutrition.wholeCubes},style:{height:e.nutrition.cubeSize+"px",flex:"0 1 "+e.nutrition.remainderCubeWidth+"px"}}):e._e()],2)]):e._e()},C=[],S={name:"NutritionInformation",props:{name:{type:String,required:!0},nutrition:{type:Object,required:!0}}},k=S,x=Object(f["a"])(k,_,C,!1,null,null,null);x.options.__file="NutritionInformation.vue";var j=x.exports,O={name:"App",components:{"food-search":p,"search-results":w,"nutrition-information":j},data:function(){return{loading:!1,timer:0,search:{searchQuery:"",searchBranded:!1},foodList:[],errorMsg:"",selectedRawData:{name:"",id:"",data:{}},information:{name:"",nutrition:{}}}},methods:{setSearchData:function(e){""!==e[0]?this.getFoodList(e):document.getElementById("foodSearch").focus()},formTheQuery:function(e){return e.map(function(e){return"".concat(e[0],"=").concat(e[1].replace(" ","+"))}).join("&")},getFoodList:function(e){var t=this,n=e[0],r=e[1];if(""!==n){var o=[["format","json"],["api_key",s.apiKey],["q",n],["ds",!1===r?"Standard%20Reference":""]],a=this.formTheQuery(o),c={method:"POST"},u=new Request("".concat(s.endPoints.search).concat(a),c);this.loading=!0,fetch(u).then(function(e){return e.json()}).then(function(e){"object"!==Object(i["a"])(e.errors)?window.setTimeout(function(){t.loading=!1,t.foodList=e.list.item},1e3):(t.loading=!1,t.errorMsg="No results for ".concat(n))}),this.search.searchQuery=n,this.search.searchBranded=r}else this.foodList=[]},getDataForSelected:function(e){var t=this,n=e.ndbno,r=e.name;if(""!==n){var o=[["format","json"],["api_key",s.apiKey],["ndbno",n],["type","b"]],a=this.formTheQuery(o),i={method:"POST"},c=new Request("".concat(s.endPoints.reports).concat(a),i);fetch(c).then(function(e){return e.json()}).then(function(e){t.selectedRawData.id=n,t.selectedRawData.name=r,t.selectedRawData.data=e,t.showResultForSelected()})}},showResultForSelected:function(){var e=this;this.getTotalSugars().then(function(t){var n=50,r=t/4,o=r%1!==0?"".concat(r).split(".")[1]:0,a="0.".concat(o),i=n*a;e.information={name:e.selectedRawData.data.report.food.name,nutrition:{totalSugars:t,cubeSize:n,wholeCubes:Math.floor(parseInt(r,10)),remainderCube:a,remainderCubeWidth:i}},e.loading=!1})},getTotalSugars:function(){var e=[["format","json"],["api_key",s.apiKey],["ndbno",this.selectedRawData.id],["nutrients",s.nutrients.sugar.id]],t=this.formTheQuery(e),n={method:"POST"},r=new Request("".concat(s.endPoints.nutrients).concat(t),n),o=fetch(r).then(function(e){return e.json()}).then(function(e){if(void 0!==e.report.foods[0])return e.report.foods[0].nutrients.length>0?e.report.foods[0].nutrients[0].value:0;throw new Error("There has been an error retrieving nutrients")}).catch(function(e){throw new Error(e.message)});return o}}},q=O,P=Object(f["a"])(q,o,a,!1,null,null,null);P.options.__file="App.vue";var R=P.exports,F=n("9483");Object(F["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("da13"),n("5903");r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(R)}}).$mount("#app")},5903:function(e,t,n){}});
//# sourceMappingURL=app.4a07e930.js.map